<app-header text="Chi tiết chương học"></app-header>
<div class="p-3">
  <form
    nz-form
    [nzLayout]="'vertical'"
    [formGroup]="form"
    style="margin-top: 4px"
  >
    <nz-form-item>
      <nz-form-label nzRequired>Tên chương học</nz-form-label>
      <nz-form-control nzErrorTip="Trường này là bắt buộc">
        <input
          nz-input
          formControlName="title"
          placeholder="Nhập tên chương học"
        />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label nzRequired>Mô tả chương học</nz-form-label>
      <nz-form-control nzErrorTip="Trường này là bắt buộc">
        <textarea
          nz-input
          formControlName="subTile"
          placeholder="Nhập mô tả chương học"
          rows="10"
        ></textarea>
      </nz-form-control>
    </nz-form-item>
    <nz-upload
      nzType="drag"
      [nzMultiple]="true"
      [nzAccept]="'file'"
      nzAction="https://www.mocky.io/v2/5cc8019d300000980a055e76"
      (nzChange)="handleChange($event)"
    >
      <p class="ant-upload-drag-icon">
        <span nz-icon nzType="inbox"></span>
      </p>
      <p class="ant-upload-text">Tải lên hướng dẫn cho chương học</p>
      <p class="ant-upload-hint">
        Tài liệu hướng dẫn sẽ giúp học sinh giải đáp thắc mắc khi làm bài
      </p>
    </nz-upload>
  </form>
  <div class="my-3">
    <div class="mb-3">Các bài học</div>
    <button nz-button nzType="primary" (click)="addLesson()">
      Thêm bài học
    </button>
    <div class="flex items-center gap-3 mt-3 flex-wrap" *ngIf="chapter">
      <div
        *ngFor="let lesson of chapter.lessonList; index as i"
        class="flex items-center"
        (click)="detailLesson(lesson.id)"
      >
        <div class="border-hover lesson w-[200px] h-[120px]">
          <div class="text-xl mt-2">Bài {{ i + 1 }}</div>
          <div class="text-gray-400 line-clamp-2">{{ lesson.title }}</div>
          <div
            (click)="removeLesson(lesson.id); $event.stopPropagation()"
            class="lesson-remove text-lg"
          >
            <i class="fa-solid fa-circle-xmark"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-3 text-end">
    <button nz-button nzType="default" (click)="cancel()" class="mr-3">
      Hủy
    </button>
    <button nz-button nzType="primary" (click)="submitForm()">Lưu</button>
  </div>
</div>
